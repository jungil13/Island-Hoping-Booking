import{r as a,b as T,c as d,a as t,t as l,j as v,f as V,v as $,F as B,h as C,k as u,o as r,n as D}from"./index--XJx4c4C.js";import{a as z}from"./axios-upsvKRUO.js";const j={class:"flex flex-col lg:flex-row h-screen bg-gray-100"},A={class:"w-full lg:w-64 bg-teal-500 shadow-md shadow-black text-white p-6 mt-20","data-aos":"fade-right"},E={class:"space-y-4 text-black font-mono font-bold text-lg"},F={class:"flex-1 p-8 mt-20"},H={class:"bg-white shadow-lg rounded-lg p-6"},q={class:"text-3xl font-bold mb-4","data-aos":"zoom-in"},G={key:0,"data-aos":"zoom-in"},J={key:1},O={class:"mb-4"},Q={class:"min-w-full mt-4 border-collapse","data-aos":"fade-up"},R={class:"border-b py-2 px-4"},U={class:"border-b py-2 px-4"},W={class:"border-b py-2 px-4"},K={class:"border-b py-2 px-4"},X={class:"border-b py-2 px-4"},Y={class:"border-b py-2 px-4"},Z={class:"border-b py-2 px-4"},tt=["onClick"],et={class:"mt-4 flex justify-between items-center"},st=["disabled"],lt={class:"text-lg"},ot=["disabled"],at={key:2},nt={class:"min-w-full mt-4 border-collapse","data-aos":"zoom-in"},dt={class:"border-b py-2 px-4"},rt={class:"border-b py-2 px-4"},it={class:"border-b py-2 px-4"},ut={class:"border-b py-2 px-4"},pt={class:"border-b py-2 px-4"},ct={class:"border-b py-2 px-4"},bt={key:0,class:"fixed inset-0 bg-gray-800 bg-opacity-50 flex justify-center items-center"},xt={class:"bg-white p-6 rounded-lg w-1/3"},mt={__name:"Profile",setup(gt){const f=JSON.parse(localStorage.getItem("user"))||{name:"Guest",email:"guest@example.com"},P=a(f.name);a(f.email);const b=a("profile"),x=a([]),_=a([]),p=a([]),y=a(""),i=a(1),g=a(5),c=a(1),m=a(!1),n=a(null),h=o=>{b.value=o},S=async()=>{try{const o=f.id,e=await z.get(`http://localhost:3000/api/mybookings?user_id=${o}`);x.value=e.data.bookings,_.value=x.value.filter(s=>s.status==="Done"),c.value=Math.ceil(x.value.length/g.value),w()}catch(o){console.error("Error fetching bookings:",o)}},w=()=>{const o=y.value.toLowerCase();p.value=x.value.filter(e=>e.id.toString().includes(o)||e.islands.toLowerCase().includes(o)),c.value=Math.ceil(p.value.length/g.value)},M=()=>{i.value<c.value&&(i.value++,k())},I=()=>{i.value>1&&(i.value--,k())},k=()=>{const o=(i.value-1)*g.value,e=o+g.value;p.value=p.value.slice(o,e)},N=o=>{n.value=o,m.value=!0},L=()=>{m.value=!1};return T(()=>{S()}),(o,e)=>(r(),d("div",j,[t("div",A,[e[4]||(e[4]=t("h2",{class:"text-3xl font-bold mb-6 font-mono"},"Dashboard",-1)),t("div",E,[t("button",{onClick:e[0]||(e[0]=s=>h("profile")),class:"w-full bg-white text-black text-left py-2 px-4 rounded-lg transition hover:underline"}," Profile "),t("button",{onClick:e[1]||(e[1]=s=>h("manageBookings")),class:"w-full bg-white text-black text-left py-2 px-4 rounded-lg transition hover:underline"}," My Bookings "),t("button",{onClick:e[2]||(e[2]=s=>h("manageCompletedBookings")),class:"w-full bg-white text-black text-left py-2 px-4 rounded-lg transition hover:underline"}," My Completed Bookings ")])]),t("div",F,[t("div",H,[t("h1",q,"Welcome, "+l(P.value)+" ðŸ‘‹ðŸ»",1),b.value==="profile"?(r(),d("div",G)):v("",!0),b.value==="manageBookings"?(r(),d("div",J,[e[6]||(e[6]=t("h2",{class:"text-2xl font-semibold mb-4","data-aos":"fade-up"},"My Bookings",-1)),e[7]||(e[7]=t("p",{class:"mb-4","data-aos":"fade-up"},"Here you can view and manage your upcoming bookings.",-1)),t("div",O,[V(t("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=s=>y.value=s),onInput:w,placeholder:"Search bookings...",class:"w-full p-2 rounded-lg border border-teal-300 focus:outline-none focus:ring-2 focus:ring-teal-400","data-aos":"fade-up"},null,544),[[$,y.value]])]),t("table",Q,[e[5]||(e[5]=t("thead",null,[t("tr",null,[t("th",{class:"border-b py-2 px-4 text-left"},"Booking ID"),t("th",{class:"border-b py-2 px-4 text-left"},"Date"),t("th",{class:"border-b py-2 px-4 text-left"},"Boat Capacity"),t("th",{class:"border-b py-2 px-4 text-left"},"Status"),t("th",{class:"border-b py-2 px-4 text-left"},"Islands"),t("th",{class:"border-b py-2 px-4 text-left"},"Total Price"),t("th",{class:"border-b py-2 px-4 text-left"},"Actions")])],-1)),t("tbody",null,[(r(!0),d(B,null,C(p.value,s=>(r(),d("tr",{key:s.id},[t("td",R,l(s.id),1),t("td",U,l(new Date(s.date).toLocaleDateString()),1),t("td",W,l(s.boat_capacity),1),t("td",K,[t("span",{class:D([{"bg-yellow-400":s.status==="Pending","bg-green-400":s.status==="Done","bg-red-400":s.status==="Cancelled"},"px-3 py-1 rounded-full text-white"])},l(s.status),3)]),t("td",X,l(s.islands||"Not Assigned"),1),t("td",Y," â‚± "+l(s.total_price),1),t("td",Z,[t("button",{onClick:vt=>N(s),class:"bg-teal-500 text-white px-4 py-2 rounded-lg hover:bg-teal-400"}," View Details ",8,tt)])]))),128))])]),t("div",et,[t("button",{onClick:I,disabled:i.value===1,class:"bg-teal-500 text-white px-4 py-2 rounded-lg hover:bg-teal-400"}," Previous ",8,st),t("span",lt,"Page "+l(i.value)+" of "+l(c.value),1),t("button",{onClick:M,disabled:i.value===c.value,class:"bg-teal-500 text-white px-4 py-2 rounded-lg hover:bg-teal-400"}," Next ",8,ot)])])):v("",!0),b.value==="manageCompletedBookings"?(r(),d("div",at,[e[9]||(e[9]=t("h2",{class:"text-2xl font-semibold mb-4","data-aos":"fade-up"},"My Completed Bookings",-1)),e[10]||(e[10]=t("p",{"data-aos":"fade-up"},"Here you can view your completed bookings.",-1)),t("table",nt,[e[8]||(e[8]=t("thead",null,[t("tr",null,[t("th",{class:"border-b py-2 px-4 text-left"},"Booking ID"),t("th",{class:"border-b py-2 px-4 text-left"},"Date"),t("th",{class:"border-b py-2 px-4 text-left"},"Boat Capacity"),t("th",{class:"border-b py-2 px-4 text-left"},"Status"),t("th",{class:"border-b py-2 px-4 text-left"},"Islands"),t("th",{class:"border-b py-2 px-4 text-left"},"Total Price")])],-1)),t("tbody",null,[(r(!0),d(B,null,C(_.value,s=>(r(),d("tr",{key:s.id},[t("td",dt,l(s.id),1),t("td",rt,l(new Date(s.date).toLocaleDateString()),1),t("td",it,l(s.boat_capacity),1),t("td",ut,[t("span",{class:D([{"bg-green-400":s.status==="Done","bg-red-400":s.status==="Cancelled"},"px-3 py-1 rounded-full text-white"])},l(s.status),3)]),t("td",pt,l(s.islands),1),t("td",ct," â‚± "+l(s.total_price),1)]))),128))])])])):v("",!0)])]),m.value?(r(),d("div",bt,[t("div",xt,[e[19]||(e[19]=t("h2",{class:"text-2xl font-semibold mb-4"},"Booking Details",-1)),t("p",null,[e[11]||(e[11]=t("strong",null,"Booking ID:",-1)),u(" "+l(n.value.id),1)]),t("p",null,[e[12]||(e[12]=t("strong",null,"Date:",-1)),u(" "+l(new Date(n.value.date).toLocaleDateString()),1)]),t("p",null,[e[13]||(e[13]=t("strong",null,"Boat Capacity:",-1)),u(" "+l(n.value.boat_capacity),1)]),t("p",null,[e[14]||(e[14]=t("strong",null,"Boat Rate:",-1)),u(" â‚±"+l(n.value.boat_rate),1)]),t("p",null,[e[15]||(e[15]=t("strong",null,"Total Price:",-1)),u(" â‚±"+l(n.value.total_price),1)]),t("p",null,[e[16]||(e[16]=t("strong",null,"Status:",-1)),u(" "+l(n.value.status),1)]),t("p",null,[e[17]||(e[17]=t("strong",null,"Payment Method:",-1)),u(" "+l(n.value.payment_method),1)]),t("p",null,[e[18]||(e[18]=t("strong",null,"Islands:",-1)),u(" "+l(n.value.islands||"Not Assigned"),1)]),t("button",{onClick:L,class:"mt-4 bg-teal-500 text-white px-4 py-2 rounded-lg hover:bg-teal-400"}," Close ")])])):v("",!0)]))}};export{mt as default};
