import{r as y,b as S,w as f,c as m,a,d as C,e as P,f as i,v as h,g as A,F as w,h as x,n as r,o as b,t as u,i as B,S as k}from"./index--XJx4c4C.js";import{a as F}from"./axios-upsvKRUO.js";const G={class:"container mx-auto px-4 py-8 mt-20","data-aos":"fade-up"},N={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},V={class:"bg-white p-6 shadow-lg rounded-lg shadow-black"},R={class:"flex flex-col gap-4"},T=["value"],E={class:"grid grid-cols-2 gap-2"},U=["value","disabled"],D=["value"],L={class:"flex gap-4 justify-center"},$={__name:"Booking",setup(j){const c=[{name:"Caohagan Island",entranceFee:70,id:1},{name:"Gilutongan Island",entranceFee:100,id:2},{name:"Nalusuan Island",entranceFee:100,id:3},{name:"Olanggo Island",entranceFee:50,id:4},{name:"Sulpa Island",entranceFee:100,id:5},{name:"Tres Marias Island",entranceFee:0,id:6}],g=[{id:1,capacity:5,rate:3e3},{id:2,capacity:8,rate:3500},{id:3,capacity:10,rate:4e3},{id:4,capacity:20,rate:4500},{id:5,capacity:25,rate:5e3},{id:6,capacity:30,rate:5500}],l=y({name:"",date:"",capacity:1,selectedIslands:[],paymentMethod:"GCASH"}),p=y(0);S(()=>{const s=JSON.parse(localStorage.getItem("user"));s&&s.name&&(l.value.name=s.name)});const v=()=>{const s=g.find(t=>t.id===l.value.capacity);let e=s?s.rate:0;l.value.selectedIslands.forEach(t=>{const o=c.find(d=>d.name===t);o&&(e+=o.entranceFee)}),p.value=e};f(()=>l.value.selectedIslands,v,{deep:!0}),f(()=>l.value.capacity,v);const n=s=>{l.value.paymentMethod=s},I=async()=>{try{const e={user_id:JSON.parse(localStorage.getItem("user")).id,date:l.value.date,boat_rate_id:l.value.capacity,total_price:p.value,payment_method:l.value.paymentMethod,selectedIslands:l.value.selectedIslands.map(o=>{const d=c.find(M=>M.name===o);return d?d.id:null}).filter(o=>o!==null)};(await F.post("http://localhost:3000/api/bookings",e)).status===201&&k.fire({icon:"success",title:"Booking Created",text:"Your booking has been successfully created!"})}catch(s){console.error("Error creating booking:",s),k.fire({icon:"error",title:"Error",text:"There was an error creating your booking. Please try again later."})}};return(s,e)=>(b(),m("div",G,[a("div",N,[e[17]||(e[17]=C('<div><div class="grid grid-cols-2 gap-4 mb-6"><div class="border p-4 rounded shadow shadow-black"><h2 class="font-bold text-lg mb-2">Boat Inclusion:</h2><ul class="list-none"><li>✓ Boat Registered in Marina</li><li>✓ Boatman/Guide</li><li>✓ Lifejacket/Lifevest</li><li>✓ Life ring</li></ul></div><div class="border p-4 rounded shadow shadow-black"><h2 class="font-bold text-lg mb-2">Boat Provided:</h2><ul class="list-none"><li>✓ Dressing room/CR</li><li>✓ Grilled Area (Sugbaanan)</li><li>✓ Center Table</li><li>✓ Extra Life Guards</li><li>✓ Charcoal/Uling</li></ul></div></div><img src="https://img1.wsimg.com/isteam/ip/733622a2-a7a0-4b8e-94bf-ba75f019e36e/IMG_1769.jpg/:/cr=t:0%25,l:0%25,w:100%25,h:100%25/rs=w:1240,cg:true" alt="Boat" class="w-full h-72 object-cover rounded-lg shadow"></div>',1)),a("div",V,[e[16]||(e[16]=a("h2",{class:"text-2xl font-bold mb-4 text-center"},"Book Your Adventure",-1)),a("form",{onSubmit:P(I,["prevent"]),class:"space-y-4"},[a("div",R,[i(a("input",{type:"text",placeholder:"Name","onUpdate:modelValue":e[0]||(e[0]=t=>l.value.name=t),class:"w-full border p-2 rounded"},null,512),[[h,l.value.name]]),i(a("input",{type:"date","onUpdate:modelValue":e[1]||(e[1]=t=>l.value.date=t),class:"w-full border p-2 rounded"},null,512),[[h,l.value.date]])]),a("div",null,[e[8]||(e[8]=a("label",{for:"boatRate"},"Select Boat Rate:",-1)),i(a("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>l.value.capacity=t),id:"boatRate"},[(b(),m(w,null,x(g,t=>a("option",{key:t.id,value:t.id},u(t.capacity)+" Persons - "+u(t.rate)+" PHP ",9,T)),64))],512),[[A,l.value.capacity]])]),a("div",null,[e[9]||(e[9]=a("h3",{class:"font-semibold mb-2"},"Choose 3 Island Destinations",-1)),a("div",E,[(b(),m(w,null,x(c,t=>a("label",{class:"flex items-center space-x-2",key:t.name},[i(a("input",{type:"checkbox","onUpdate:modelValue":e[3]||(e[3]=o=>l.value.selectedIslands=o),value:t.name,disabled:l.value.selectedIslands.length>=3&&!l.value.selectedIslands.includes(t.name)},null,8,U),[[B,l.value.selectedIslands]]),a("span",null,u(t.name)+" ("+u(t.entranceFee)+" php)",1)])),64))])]),a("div",null,[e[10]||(e[10]=a("label",{class:"font-semibold"},"Total Payment",-1)),a("input",{type:"text",value:`${p.value} php`,class:"w-full border p-2 rounded",readonly:""},null,8,D)]),a("div",L,[a("button",{type:"button",onClick:e[4]||(e[4]=t=>n("GCASH")),class:r([{"border-2 border-blue-500":l.value.paymentMethod==="GCASH"},"bg-gray-200 px-4 py-2 rounded shadow"])},e[11]||(e[11]=[a("img",{src:"https://play-lh.googleusercontent.com/QNP0Aj2hyumAmYiWVAsJtY2LLTQnzHxdW7-DpwFUFNkPJjgRxi-BXg7A4yI6tgYKMeU",alt:"GCash",class:"w-8 h-8"},null,-1)]),2),a("button",{type:"button",onClick:e[5]||(e[5]=t=>n("PayMaya")),class:r([{"border-2 border-blue-500":l.value.paymentMethod==="PayMaya"},"bg-gray-200 px-4 py-2 rounded shadow"])},e[12]||(e[12]=[a("img",{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTPidDnjG44Xn3H9wR3MAEp5HY4Fw501be-Fg&s",alt:"PayMaya",class:"w-8 h-8"},null,-1)]),2),a("button",{type:"button",onClick:e[6]||(e[6]=t=>n("VISA")),class:r([{"border-2 border-blue-500":l.value.paymentMethod==="VISA"},"bg-gray-200 px-4 py-2 rounded shadow"])},e[13]||(e[13]=[a("img",{src:"https://image.similarpng.com/very-thumbnail/2020/06/Logo-visa-icon-PNG.png",alt:"VISA",class:"w-8 h-8"},null,-1)]),2),a("button",{type:"button",onClick:e[7]||(e[7]=t=>n("MasterCard")),class:r([{"border-2 border-blue-500":l.value.paymentMethod==="MasterCard"},"bg-gray-200 px-4 py-2 rounded shadow"])},e[14]||(e[14]=[a("img",{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT_oiolN22m9vVbrYhwtstvAUxo9fhsPIbykQ&s",alt:"MasterCard",class:"w-8 h-8"},null,-1)]),2)]),e[15]||(e[15]=a("button",{type:"submit",class:"w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700 transition"}," SEND REQUEST ",-1))],32)])])]))}};export{$ as default};
